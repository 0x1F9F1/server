#
# MDEV-7912
#
# multitable delete with wrongly set sort_buffer_size crashes in merge_buffers
#
call mtr.add_suppression("Out of memory");
create table `t1` (`a` datetime not null) engine=InnoDB;
create table `t2` (`a` int not null) engine=InnoDB;
replace into t1 values (),();
insert into t2 values(0);
#
# sort_buffer_size must exceed 4GB to test the crash.
#
set session sort_buffer_size = 1024*1024*1024*5;
delete d2 from t2 as d1, t1 as d2 where d1.a <=> d2.a;
drop table t2;
drop table t1;
