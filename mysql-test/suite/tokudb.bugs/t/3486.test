# ticket 895 is a query optimization problem with the primary key

--source include/have_tokudb.inc
SET STORAGE_ENGINE = 'tokudb';

--disable_warnings
DROP TABLE IF EXISTS foo;
--enable_warnings

set session tokudb_disable_slow_alter=ON;

create table foo (a blob, clustering key (a(3)))engine=TokuDB;
insert into foo values("");
alter table foo add column b blob;
update foo set b="bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb";
select * from foo;

drop table foo;