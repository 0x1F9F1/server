--source include/have_wsrep.inc

--echo
--echo # MDEV#5534: mysql_tzinfo_to_sql generates wrong query
--echo #
--echo # Testing wsrep_replicate_myisam variable.

--error ER_INCORRECT_GLOBAL_LOCAL_VAR
SELECT @@session.wsrep_replicate_myisam;
SELECT @@global.wsrep_replicate_myisam;

--error ER_GLOBAL_VARIABLE
SET SESSION wsrep_replicate_myisam= ON;
SET GLOBAL wsrep_replicate_myisam= ON;

# Reset it back.
SET GLOBAL wsrep_replicate_myisam= OFF;

--echo #
--echo # MDEV#5790: SHOW GLOBAL STATUS LIKE does not show the correct list of
--echo # variables when using "_"
--echo #

CALL mtr.add_suppression("WSREP: Could not open saved state file for reading.*");

--replace_column 2 #
SHOW GLOBAL STATUS LIKE 'wsrep%';

--echo
--replace_column 2 #
SHOW GLOBAL STATUS LIKE 'wsrep_%';

SHOW GLOBAL STATUS LIKE 'wsrep_local_state_comment';

--echo # Should show nothing.
SHOW STATUS LIKE 'x';

--echo #
--echo # MDEV#6079: xtrabackup SST failing with maria-10.0-galera
--echo #

# The following 2 variables are used in innobackupex during xtrabackup-based
# SST.
--echo
--replace_column 2 #
SHOW STATUS LIKE 'wsrep_local_state_uuid';
--echo
--replace_column 2 #
SHOW STATUS LIKE 'wsrep_last_committed';

--echo # End of test.
