set global binlog_split_alter=true;
# Myisam
create table t1( a int, b int);
insert into t1 values(1,1);
insert into t1 values(2,2);
#Normal Alter
alter table t1 add column c int;
#Failed Alter
insert into t1 values(1,1, NULL);
alter table t1 change a a int unique ;
ERROR 23000: Duplicate entry '1' for key 'a'
include/show_binlog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int, b int)
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 add column c int */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 10 */ alter table t1 add column c int
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1, NULL)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 change a a int unique */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 10 */ alter table t1 change a a int unique
drop table t1;
# Innodb
create table t1( a int, b int) engine=innodb;
insert into t1 values(1,1);
insert into t1 values(2,2);
#Normal Alter
alter table t1 add column c int;
#Failed Alter
insert into t1 values(1,1, NULL);
alter table t1 change a a int unique ;
ERROR 23000: Duplicate entry '1' for key 'a'
include/show_binlog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int, b int)
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 add column c int */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 10 */ alter table t1 add column c int
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1, NULL)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 change a a int unique */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 10 */ alter table t1 change a a int unique
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1` /* generated by server */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 add column c int */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 10 */ alter table t1 add column c int
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1, NULL)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 change a a int unique */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 10 */ alter table t1 change a a int unique
drop table t1;
# Aria
create table t1( a int, b int) engine=aria;
insert into t1 values(1,1);
insert into t1 values(2,2);
#Normal Alter
alter table t1 add column c int;
#Failed Alter
insert into t1 values(1,1, NULL);
alter table t1 change a a int unique ;
ERROR 23000: Duplicate entry '1' for key 'a'
include/show_binlog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int, b int)
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 add column c int */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 10 */ alter table t1 add column c int
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1, NULL)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 change a a int unique */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 10 */ alter table t1 change a a int unique
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1` /* generated by server */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 add column c int */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 10 */ alter table t1 add column c int
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1, NULL)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 change a a int unique */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 10 */ alter table t1 change a a int unique
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1` /* generated by server */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int, b int) engine=aria
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 add column c int */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 10 */ alter table t1 add column c int
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1, NULL)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 change a a int unique */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 10 */ alter table t1 change a a int unique
drop table t1;
#concurrent alter Myisam
SET @old_debug= @@global.debug;
set global debug_dbug="+d,start_alter_delay_master";
create table t1( a int primary key, b int) engine=myisam;
insert into t1 values(1,1),(2,2);
create table t2( a int primary key, b int) engine=myisam;
insert into t2 values(1,1),(2,2);
create table t3( a int primary key, b int) engine=myisam;
insert into t3 values(1,1),(2,2);
create table t4( a int primary key, b int) engine=myisam;
insert into t4 values(1,1),(2,2);
create table t5( a int primary key, b int) engine=myisam;
insert into t5 values(1,1),(2,2);
connect  con1,localhost,root,,;
connect  con2,localhost,root,,;
connect  con3,localhost,root,,;
connect  con4,localhost,root,,;
connect  con5,localhost,root,,;
connection con1;
alter table t1 add column c int, force, algorithm=copy;
connection con2;
alter table t2 add column c int, force, algorithm=copy;
connection con3;
alter table t3 add column c int, force, algorithm=copy;
connection con4;
alter table t4 add column c int, force, algorithm=copy;
connection con5;
alter table t5 add column c int, force, algorithm=copy;
connection con1;
connection con2;
connection con3;
connection con4;
connection con5;
# Rollback tests
connection con1;
insert into t1 values(3,2,1);
alter table t1 change b b int unique, force, algorithm=copy;
connection con2;
insert into t2 values(3,2,1);
alter table t2 change b b int unique, force, algorithm=copy;
connection con3;
insert into t3 values(3,2,1);
alter table t3 change b b int unique, force, algorithm=copy;
connection con4;
insert into t4 values(3,2,1);
alter table t4 change b b int unique, force, algorithm=copy;
connection con5;
insert into t5 values(3,2,1);
alter table t5 change b b int unique, force, algorithm=copy;
connection con1;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con2;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con3;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con4;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con5;
ERROR 23000: Duplicate entry '2' for key 'b'
drop table t1,t2,t3,t4,t5;
disconnect con1;
disconnect con2;
disconnect con3;
disconnect con4;
disconnect con5;
connection default;
SET GLOBAL debug_dbug= @old_debug;
#concurrent alter Aria
SET @old_debug= @@global.debug;
set global debug_dbug="+d,start_alter_delay_master";
create table t1( a int primary key, b int) engine=aria;
insert into t1 values(1,1),(2,2);
create table t2( a int primary key, b int) engine=aria;
insert into t2 values(1,1),(2,2);
create table t3( a int primary key, b int) engine=aria;
insert into t3 values(1,1),(2,2);
create table t4( a int primary key, b int) engine=aria;
insert into t4 values(1,1),(2,2);
create table t5( a int primary key, b int) engine=aria;
insert into t5 values(1,1),(2,2);
connect  con1,localhost,root,,;
connect  con2,localhost,root,,;
connect  con3,localhost,root,,;
connect  con4,localhost,root,,;
connect  con5,localhost,root,,;
connection con1;
alter table t1 add column c int, force, algorithm=copy;
connection con2;
alter table t2 add column c int, force, algorithm=copy;
connection con3;
alter table t3 add column c int, force, algorithm=copy;
connection con4;
alter table t4 add column c int, force, algorithm=copy;
connection con5;
alter table t5 add column c int, force, algorithm=copy;
connection con1;
connection con2;
connection con3;
connection con4;
connection con5;
# Rollback tests
connection con1;
insert into t1 values(3,2,1);
alter table t1 change b b int unique, force, algorithm=copy;
connection con2;
insert into t2 values(3,2,1);
alter table t2 change b b int unique, force, algorithm=copy;
connection con3;
insert into t3 values(3,2,1);
alter table t3 change b b int unique, force, algorithm=copy;
connection con4;
insert into t4 values(3,2,1);
alter table t4 change b b int unique, force, algorithm=copy;
connection con5;
insert into t5 values(3,2,1);
alter table t5 change b b int unique, force, algorithm=copy;
connection con1;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con2;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con3;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con4;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con5;
ERROR 23000: Duplicate entry '2' for key 'b'
drop table t1,t2,t3,t4,t5;
disconnect con1;
disconnect con2;
disconnect con3;
disconnect con4;
disconnect con5;
connection default;
SET GLOBAL debug_dbug= @old_debug;
#concurrent alter Innodb copy
SET @old_debug= @@global.debug;
set global debug_dbug="+d,start_alter_delay_master";
create table t1( a int primary key, b int) engine=innodb;
insert into t1 values(1,1),(2,2);
create table t2( a int primary key, b int) engine=innodb;
insert into t2 values(1,1),(2,2);
create table t3( a int primary key, b int) engine=innodb;
insert into t3 values(1,1),(2,2);
create table t4( a int primary key, b int) engine=innodb;
insert into t4 values(1,1),(2,2);
create table t5( a int primary key, b int) engine=innodb;
insert into t5 values(1,1),(2,2);
connect  con1,localhost,root,,;
connect  con2,localhost,root,,;
connect  con3,localhost,root,,;
connect  con4,localhost,root,,;
connect  con5,localhost,root,,;
connection con1;
alter table t1 add column c int, force, algorithm=copy;
connection con2;
alter table t2 add column c int, force, algorithm=copy;
connection con3;
alter table t3 add column c int, force, algorithm=copy;
connection con4;
alter table t4 add column c int, force, algorithm=copy;
connection con5;
alter table t5 add column c int, force, algorithm=copy;
connection con1;
connection con2;
connection con3;
connection con4;
connection con5;
# Rollback tests
connection con1;
insert into t1 values(3,2,1);
alter table t1 change b b int unique, force, algorithm=copy;
connection con2;
insert into t2 values(3,2,1);
alter table t2 change b b int unique, force, algorithm=copy;
connection con3;
insert into t3 values(3,2,1);
alter table t3 change b b int unique, force, algorithm=copy;
connection con4;
insert into t4 values(3,2,1);
alter table t4 change b b int unique, force, algorithm=copy;
connection con5;
insert into t5 values(3,2,1);
alter table t5 change b b int unique, force, algorithm=copy;
connection con1;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con2;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con3;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con4;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con5;
ERROR 23000: Duplicate entry '2' for key 'b'
drop table t1,t2,t3,t4,t5;
disconnect con1;
disconnect con2;
disconnect con3;
disconnect con4;
disconnect con5;
connection default;
SET GLOBAL debug_dbug= @old_debug;
#concurrent alter Innodb Inplace
SET @old_debug= @@global.debug;
set global debug_dbug="+d,start_alter_delay_master";
create table t1( a int primary key, b int) engine=innodb;
insert into t1 values(1,1),(2,2);
create table t2( a int primary key, b int) engine=innodb;
insert into t2 values(1,1),(2,2);
create table t3( a int primary key, b int) engine=innodb;
insert into t3 values(1,1),(2,2);
create table t4( a int primary key, b int) engine=innodb;
insert into t4 values(1,1),(2,2);
create table t5( a int primary key, b int) engine=innodb;
insert into t5 values(1,1),(2,2);
connect  con1,localhost,root,,;
connect  con2,localhost,root,,;
connect  con3,localhost,root,,;
connect  con4,localhost,root,,;
connect  con5,localhost,root,,;
connection con1;
alter table t1 add column c int, force, algorithm=inplace;
connection con2;
alter table t2 add column c int, force, algorithm=inplace;
connection con3;
alter table t3 add column c int, force, algorithm=inplace;
connection con4;
alter table t4 add column c int, force, algorithm=inplace;
connection con5;
alter table t5 add column c int, force, algorithm=inplace;
connection con1;
connection con2;
connection con3;
connection con4;
connection con5;
# Rollback tests
connection con1;
insert into t1 values(3,2,1);
alter table t1 change b b int unique, force, algorithm=inplace;
connection con2;
insert into t2 values(3,2,1);
alter table t2 change b b int unique, force, algorithm=inplace;
connection con3;
insert into t3 values(3,2,1);
alter table t3 change b b int unique, force, algorithm=inplace;
connection con4;
insert into t4 values(3,2,1);
alter table t4 change b b int unique, force, algorithm=inplace;
connection con5;
insert into t5 values(3,2,1);
alter table t5 change b b int unique, force, algorithm=inplace;
connection con1;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con2;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con3;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con4;
ERROR 23000: Duplicate entry '2' for key 'b'
connection con5;
ERROR 23000: Duplicate entry '2' for key 'b'
drop table t1,t2,t3,t4,t5;
disconnect con1;
disconnect con2;
disconnect con3;
disconnect con4;
disconnect con5;
connection default;
SET GLOBAL debug_dbug= @old_debug;
include/show_binlog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int, b int)
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 add column c int */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 10 */ alter table t1 add column c int
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1, NULL)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 change a a int unique */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 10 */ alter table t1 change a a int unique
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1` /* generated by server */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 add column c int */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 10 */ alter table t1 add column c int
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1, NULL)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 change a a int unique */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 10 */ alter table t1 change a a int unique
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1` /* generated by server */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int, b int) engine=aria
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 add column c int */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 10 */ alter table t1 add column c int
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1, NULL)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 10 alter table t1 change a a int unique */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 10 */ alter table t1 change a a int unique
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1` /* generated by server */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int primary key, b int) engine=myisam
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t2( a int primary key, b int) engine=myisam
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t2 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t2)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t3( a int primary key, b int) engine=myisam
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t3 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t3)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t4( a int primary key, b int) engine=myisam
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t4 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t4)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t5( a int primary key, b int) engine=myisam
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t5 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t5)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 15 alter table t2 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 14 alter table t1 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 17 alter table t4 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 16 alter table t3 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 18 alter table t5 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 18 */ alter table t5 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 15 */ alter table t2 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 17 */ alter table t4 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 16 */ alter table t3 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 14 */ alter table t1 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 14 alter table t1 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t2 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t2)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 15 alter table t2 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t3 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t3)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 16 alter table t3 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t4 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t4)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 17 alter table t4 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t5 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t5)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 18 alter table t5 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 16 */ alter table t3 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 15 */ alter table t2 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 14 */ alter table t1 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 18 */ alter table t5 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 17 */ alter table t4 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1`,`t2`,`t3`,`t4`,`t5` /* generated by server */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int primary key, b int) engine=aria
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t2( a int primary key, b int) engine=aria
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t2 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t2)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t3( a int primary key, b int) engine=aria
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t3 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t3)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t4( a int primary key, b int) engine=aria
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t4 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t4)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t5( a int primary key, b int) engine=aria
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t5 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t5)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 20 alter table t2 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 21 alter table t3 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 19 alter table t1 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 22 alter table t4 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 23 alter table t5 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 21 */ alter table t3 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 20 */ alter table t2 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 22 */ alter table t4 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 19 */ alter table t1 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 23 */ alter table t5 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 19 alter table t1 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t2 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t2)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 20 alter table t2 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t3 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t3)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 21 alter table t3 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t4 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t4)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 22 alter table t4 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t5 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t5)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Query	#	#	COMMIT
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 23 alter table t5 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 19 */ alter table t1 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 20 */ alter table t2 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 21 */ alter table t3 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 22 */ alter table t4 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 23 */ alter table t5 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1`,`t2`,`t3`,`t4`,`t5` /* generated by server */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t2( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t2 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t2)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t3( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t3 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t3)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t4( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t4 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t4)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t5( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t5 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t5)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 25 alter table t2 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 24 alter table t1 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 26 alter table t3 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 27 alter table t4 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 28 alter table t5 add column c int, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 26 */ alter table t3 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 24 */ alter table t1 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 25 */ alter table t2 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 27 */ alter table t4 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 28 */ alter table t5 add column c int, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 24 alter table t1 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t2 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t2)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 25 alter table t2 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t3 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t3)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 26 alter table t3 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t4 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t4)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 27 alter table t4 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t5 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t5)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 28 alter table t5 change b b int unique, force, algorithm=copy */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 24 */ alter table t1 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 25 */ alter table t2 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 28 */ alter table t5 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 27 */ alter table t4 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 26 */ alter table t3 change b b int unique, force, algorithm=copy
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1`,`t2`,`t3`,`t4`,`t5` /* generated by server */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t1( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t2( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t2 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t2)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t3( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t3 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t3)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t4( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t4 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t4)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; create table t5( a int primary key, b int) engine=innodb
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t5 values(1,1),(2,2)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t5)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 29 alter table t1 add column c int, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 31 alter table t3 add column c int, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 32 alter table t4 add column c int, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 33 alter table t5 add column c int, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 30 alter table t2 add column c int, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 29 */ alter table t1 add column c int, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 30 */ alter table t2 add column c int, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 32 */ alter table t4 add column c int, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 31 */ alter table t3 add column c int, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 COMMIT 33 */ alter table t5 add column c int, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t1 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t1)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 29 alter table t1 change b b int unique, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t2 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t2)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 30 alter table t2 change b b int unique, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t3 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t3)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 31 alter table t3 change b b int unique, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t4 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t4)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 32 alter table t4 change b b int unique, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	BEGIN GTID #-#-#
master-bin.000001	#	Annotate_rows	#	#	insert into t5 values(3,2,1)
master-bin.000001	#	Table_map	#	#	table_id: # (test.t5)
master-bin.000001	#	Write_rows_v1	#	#	table_id: # flags: STMT_END_F
master-bin.000001	#	Xid	#	#	COMMIT /* XID */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 START 33 alter table t5 change b b int unique, force, algorithm=inplace */
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 30 */ alter table t2 change b b int unique, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 29 */ alter table t1 change b b int unique, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 32 */ alter table t4 change b b int unique, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 31 */ alter table t3 change b b int unique, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; /*!100001 ROLLBACK 33 */ alter table t5 change b b int unique, force, algorithm=inplace
master-bin.000001	#	Gtid	#	#	GTID #-#-#
master-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1`,`t2`,`t3`,`t4`,`t5` /* generated by server */
set global binlog_split_alter=false;
