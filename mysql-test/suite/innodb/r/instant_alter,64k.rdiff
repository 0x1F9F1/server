--- instant_alter.result	2018-09-19 21:48:19.370042564 +0530
+++ instant_alter.reject	2018-09-19 21:52:31.729867852 +0530
@@ -2,7 +2,7 @@
 # MDEV-11369: Instant ADD COLUMN for InnoDB
 #
 CREATE TABLE t(a INT UNIQUE)ENGINE=InnoDB ROW_FORMAT=COMPACT;
-ALTER TABLE t ADD e INT, ROW_FORMAT=COMPRESSED;
+ALTER TABLE t ADD e INT, ROW_FORMAT=DYNAMIC;
 INSERT INTO t SET a=1;
 SET @old_instant=
 (SELECT variable_value FROM information_schema.global_status
@@ -33,17 +33,17 @@
   `c` int(11) NOT NULL,
   `d` int(11) NOT NULL,
   UNIQUE KEY `a` (`a`)
-) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=COMPRESSED
+) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC
 SELECT variable_value-@old_instant instants
 FROM information_schema.global_status
 WHERE variable_name = 'innodb_instant_alter_column';
 instants
-0
+1
 SELECT variable_value-@old_instant instants
 FROM information_schema.global_status
 WHERE variable_name = 'innodb_instant_alter_column';
 instants
-0
+1
 DROP TABLE t;
 connect analyze, localhost, root;
 connection default;
@@ -240,7 +240,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/t2';
 clust_index_size
-5
+1
 connection default;
 ROLLBACK;
 connection analyze;
@@ -250,7 +250,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/t2';
 clust_index_size
-3
+1
 connection default;
 BEGIN;
 UPDATE t2 SET d1 = repeat(id, 200);
@@ -261,7 +261,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/t2';
 clust_index_size
-3
+1
 connection default;
 ROLLBACK;
 connection analyze;
@@ -271,7 +271,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/t2';
 clust_index_size
-3
+1
 connection default;
 ALTER TABLE t2 DROP p;
 affected rows: 0
@@ -390,7 +390,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/big';
 clust_index_size
-5
+1
 connection default;
 ALTER TABLE big ADD COLUMN
 (d1 INT DEFAULT 0, d2 VARCHAR(20) DEFAULT 'abcde',
@@ -413,7 +413,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/big';
 clust_index_size
-13
+3
 connection default;
 ROLLBACK;
 CHECKSUM TABLE big;
@@ -426,7 +426,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/big';
 clust_index_size
-5
+1
 connection default;
 InnoDB		0 transactions not purged
 DROP TABLE t1,t2,t3,t4,big;
@@ -657,7 +657,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/t2';
 clust_index_size
-5
+1
 connection default;
 ROLLBACK;
 connection analyze;
@@ -667,7 +667,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/t2';
 clust_index_size
-3
+1
 connection default;
 BEGIN;
 UPDATE t2 SET d1 = repeat(id, 200);
@@ -678,7 +678,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/t2';
 clust_index_size
-3
+1
 connection default;
 ROLLBACK;
 connection analyze;
@@ -688,7 +688,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/t2';
 clust_index_size
-3
+1
 connection default;
 ALTER TABLE t2 DROP p;
 affected rows: 0
@@ -807,7 +807,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/big';
 clust_index_size
-5
+1
 connection default;
 ALTER TABLE big ADD COLUMN
 (d1 INT DEFAULT 0, d2 VARCHAR(20) DEFAULT 'abcde',
@@ -830,7 +830,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/big';
 clust_index_size
-13
+3
 connection default;
 ROLLBACK;
 CHECKSUM TABLE big;
@@ -843,7 +843,7 @@
 SELECT clust_index_size FROM INFORMATION_SCHEMA.INNODB_SYS_TABLESTATS
 WHERE name = 'test/big';
 clust_index_size
-5
+1
 connection default;
 InnoDB		0 transactions not purged
 DROP TABLE t1,t2,t3,t4,big;
