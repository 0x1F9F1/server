SET @old_instant=
(SELECT variable_value FROM information_schema.global_status
WHERE variable_name = 'innodb_instant_alter_column');
CREATE TABLE t(a INT PRIMARY KEY, b253 INT, c253 INT, d253 INT, e253 INT)
ENGINE=InnoDB;
INSERT INTO t VALUES(1,2,3,4,5);
SELECT * FROM t;
b0	d0	a	c0	e0
NULL	NULL	1	NULL	NULL
ALTER TABLE t DROP b0, DROP c0, DROP d0, DROP e0,
ADD COLUMN b INT, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=INPLACE
ALTER TABLE t CHANGE COLUMN b0 b INT AFTER a, ALGORITHM=INSTANT;
ALTER TABLE t DROP e0, DROP c0, DROP d0, ALGORITHM=INSTANT;
SELECT * FROM t;
a	b
1	NULL
ALTER TABLE t DROP COLUMN b, ALGORITHM=INSTANT;
ALTER TABLE t ADD COLUMN b INT, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=INPLACE
SELECT variable_value-@old_instant instants
FROM information_schema.global_status
WHERE variable_name = 'innodb_instant_alter_column';
instants
256
ALTER TABLE t ADD COLUMN b INT;
SELECT variable_value-@old_instant instants
FROM information_schema.global_status
WHERE variable_name = 'innodb_instant_alter_column';
instants
256
SELECT * FROM t;
a	b
1	NULL
DROP TABLE t;
